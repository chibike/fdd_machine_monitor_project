{% extends "basic_app/html/admin_panel.html" %}
{% load django_tables2 crispy_forms_tags %}

{% block admin_table %}
    <div style="padding-top: 12px">
        {% crispy filter.form %}
        <a href="{% url 'new_device' %}" class="float-right"><button type="button" class="btn btn-primary">Create new</button></a>

    </div>
    {% render_table table %}
    {% include 'basic_app/html/_modal.html' %}
{% endblock %}

{% block scripts %}
    <script>
        $(function() {
            $('.delete_tag').on('click', function() {
                const id = $(this).data('id');
                const action = $(this).data('action');
                $('#confirm_modal_title').text('Confirm deletion');
                $('#confirm_modal_body').html('Are you sure you want to delete device?');
                $('#confirm_modal_submit').val('Delete');
                $('#confirm_modal_id').val(id);
                $('#confirm_modal_form').attr('action', action);
            });
        });

        $(function() {
            $('.edit_device_tag').on('click', function() {
                const id = $(this).data('id');
                const action = $(this).data('action');
                $('#edit_device_modal_title').text('Confirm deletion');
                $('#edit_device_modal_body').html('Are you sure you want to edit device: <b>' + id + '</b>');
                $('#edit_device_modal_submit').val('Delete');
                $('#edit_device_modal_id').val(id);
                $('#edit_device_modal_form').attr('action', action);
            });
        });

        $(function() {
            $('#content').addClass('mt-5');
        });
    </script>
{% endblock %}